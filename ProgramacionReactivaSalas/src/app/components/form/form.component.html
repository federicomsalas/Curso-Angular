<div class="container">
    <h2>Federico Salas - Entregable nº 3 - Reactive Forms</h2>
    <hr>            
      <h3>A continuación se presenta solución al entregable de Reactive Forms con uso de validaciones.</h3>        
      <h3>Consideraciones:</h3>
      <p>- Se agregaron validaciones del tipo "required" y "pattern" para valores numéricos.</p>
      <p>- Además se puede activar/desactivar una <b>validación personalizada</b> al agregar un alumno. Al momento de completar sus datos, se deberá indicar el resultado de multiplicar los valores de puntaje y examen.</p>
      <p>- Los validadores solo muestran mensaje una vez editados el campo en cuestión. También realizan comprobación al dar submit o aceptar.</p>
    <hr>
    
    <!-- <pre>Total de alumnos: {{ this.alumnos$ | async | json }}</pre> -->
    

    <!-- <section class="container" *ngIf="this.alumnos$ | async as tablaData" >
      <h2>Total de alumnos: {{ tablaData.length }}</h2>

      <ul *ngIf="tablaData ? tablaData.length > 0 : ''"  class="responsive-table">
        <li class="table-header">
          <div class="col col-1">#</div>
          <div class="col col-2">Nombre y Apellido</div>
          <div class="col col-3">Suma de notas</div>
          <div class="col col-4">Cant. Exámenes</div>            
          <div class="col col-5">Promedio</div>            
        </li>
        <li class="table-row" [ngClass]="mejorPromedio(alumno) ? alumno.seleccionado ? 'mejorPromedio seleccionado' : 'mejorPromedio' : alumno.seleccionado ? 'seleccionado' : ''"                                                                   
                              [ngStyle]="{'background':getColor(alumno)}"
                              (click)="seleccionar(alumno)" 
                              *ngFor="let alumno of alumnos">
          <div class="ribbon" *ngIf="mejorPromedio(alumno)">TOP</div>        
          <div class="col col-1" data-label="Posición">{{ alumno.posicion}} </div>
          <div class="col col-2" data-label="Nombre y apellido">{{ alumno.apellido + ', ' + alumno.nombre}} </div>
          <div class="col col-3" data-label="Suma de notas">{{ alumno.puntaje}} </div>
          <div class="col col-4" data-label="Cant. Exámenes">{{ alumno.examenes }}   </div>
          <div class="col col-5" data-label="Promedio">{{ alumno.puntaje / alumno.examenes | number: '0.2-2' }}     </div>
        </li>    
      </ul>

    </section> -->

<div class="row">


   <div class="col-sm-4 form-group">
    <div id="kpi" style="width:100%; height: 200px; padding:5px; margin: 0 auto;border-style: solid;border-radius:20px;border-color:#CCCCCC;border-width:1px;">		
     <h2 style="text-align:center;margin-top:20px;">Próxima recarga en</h2>
     <p style="text-align:center;margin-top:-20px;font-size:60px;color:red;font-weight:bold;">{{ subject |  async }}</p>	
     <h3 style="text-align:center;margin-top:-40px;">Async</h3>
    </div>
 </div> 
   

   <div class="col-sm-4 form-group">
    <div id="kpi" style="width:100%; height: 200px; padding:5px; margin: 0 auto;border-style: solid;border-radius:20px;border-color:#CCCCCC;border-width:1px;">		
     <h2 style="text-align:center;margin-top:20px;">Iteraciones</h2>
     <p style="text-align:center;margin-top:-20px;font-size:60px;color:#285096;font-weight:bold;">{{ cantidadRepeticiones$ |  async }}</p>	
     <h3 style="text-align:center;margin-top:-40px;">Async</h3>
    </div>
 </div> 

 <div class="col-sm-4 form-group">
  <div id="kpi" style="width:100%; height: 200px; padding:5px; margin: 0 auto;border-style: solid;border-radius:20px;border-color:#CCCCCC;border-width:1px;">		
   <h2 style="text-align:center;margin-top:20px;">Mejor promedio</h2>
   <p style="text-align:center;margin-top:-20px;font-size:60px;color:#285096;font-weight:bold;">{{ valorPromedio  }}</p>	   
   <div style="text-align: center;">
   <button type="button" class="btn btn-primary"  style="margin-top:-100px;" (click)="obtenerPromisePromedios()" >Obtener Promise</button>    
  </div>
  </div>
</div> 

</div> 


<h3>Filtrar promedios</h3>
<div class="row">


  <div class="col-sm-4 form-group">
   <div id="kpi" style="width:100%; height: 200px; padding:5px; margin: 0 auto;border-style: solid;border-radius:20px;border-color:#CCCCCC;border-width:1px;">		
    <h2 style="text-align:center;margin-top:20px;">Promedios mayor a</h2>
    <div style="width:100%;text-align:center">
    <input type="number" style="text-align:center;height:72px;font-size:60px;color:red;font-weight:bold;margin:auto;width:50%" class="form-control" [(ngModel)]="filtrar">  
    <h3 style="text-align:center;">Map</h3>
  </div>
   </div>
</div> 
  

  <div class="col-sm-4 form-group">
   <div id="kpi" style="width:100%; height: 200px; padding:5px; margin: 0 auto;border-style: solid;border-radius:20px;border-color:#CCCCCC;border-width:1px;">		
    <h2 style="text-align:center;margin-top:20px;">Total de alumnos</h2>
    <p style="text-align:center;margin-top:-20px;font-size:60px;color:#285096;font-weight:bold;">{{  totalAlumnos  }}</p>	
    <h3 style="text-align:center;margin-top:-40px;">Tap</h3>
   </div>
</div> 

<div class="col-sm-4 form-group">
 <div id="kpi" style="width:100%; height: 200px; padding:5px; margin: 0 auto;border-style: solid;border-radius:20px;border-color:#CCCCCC;border-width:1px;">		
  <h2 style="text-align:center;margin-top:20px;">Filtrados</h2>
  <p style="text-align:center;margin-top:-20px;font-size:60px;color:#285096;font-weight:bold;">{{ this.alumnos.length  }}</p>	   
  <h3 style="text-align:center;margin-top:-40px;">Map</h3>
 </div>
</div> 

</div> 
  

     <ul *ngIf="this.alumnos ? this.alumnos.length > 0 : ''"  class="responsive-table">
      <li class="table-header">
        <div class="col col-1">#</div>
        <div class="col col-2">Nombre y Apellido</div>
        <div class="col col-3">Suma de notas</div>
        <div class="col col-4">Cant. Exámenes</div>            
        <div class="col col-5">Promedio</div>            
      </li>
      <li class="table-row" [ngClass]="mejorPromedio(alumno) ? alumno.seleccionado ? 'mejorPromedio seleccionado' : 'mejorPromedio' : alumno.seleccionado ? 'seleccionado' : ''"                                                                   
                            [ngStyle]="{'background':getColor(alumno)}"
                            (click)="seleccionar(alumno)" 
                            *ngFor="let alumno of alumnos">
        <div class="ribbon" *ngIf="mejorPromedio(alumno)">TOP</div>        
        <div class="col col-1" data-label="Posición">{{ alumno.posicion}} </div>
        <div class="col col-2" data-label="Nombre y apellido">{{ alumno.apellido + ', ' + alumno.nombre}} </div>
        <div class="col col-3" data-label="Suma de notas">{{ alumno.puntaje}} </div>
        <div class="col col-4" data-label="Cant. Exámenes">{{ alumno.examenes }}   </div>
        <div class="col col-5" data-label="Promedio">{{ alumno.puntaje / alumno.examenes | number: '0.2-2' }}     </div>
      </li>    
    </ul> 


  </div>


